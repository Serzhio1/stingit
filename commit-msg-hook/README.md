# Commit-msg 

commit-msg - это хук, который валидирует формат сообщения коммита

## Проблема

Давай рассмотрим примеры нескольких коммит-сообщений

- fix some bugs
- refactoring code
- update versions
- some fixes

Если подобные сообщения не вызывают у тебя много вопросов, и тебе достаточно этой информации, чтобы понять суть изменений в коде, то не трать свое время, этот хук тебе не нужен

## Решение

Если ты читаешь дальше, значит тебе важно, чтобы в твоем проекте сообщения коммитов были качественными, достаточно подробными и соответствовали определенному формату, например, такому:

```
ALLOWED_COMMIT_TYPES [PREFIX_TASK_NAME-ID] DESCRIPTION_CHANGES
```

| Часть сообщения | Описание |
|-------|----------|
| `ALLOWED_COMMIT_TYPES` | тип изменения. Например `fix:`|
| `PREFIX_TASK_NAME` | префикс задачи. Например `OSG`|
| `ID` | номер задачи. Например `1731`|
| `DESCRIPTION_CHANGES` | описание изменений |

## Примеры валидных сообщений

Посмотри как хорошо могут выглядеть коммит-сообщения, если ты будешь использовать этот хук в своем проекте

```
fix: [OSG-0123] исправлен баг авторизации, связанный с некорректной валидацией токена
```

```
refactor: [ESB-77] переработан модуль расчёта стоимости, уменьшено количество вложенных условий
```

```
test: [CSK-9812] добавлены интеграционные тесты для проверки корректности отмены транзакций
```

## Смогу ли я конфигурировать настройки валидации? Да!

Ты можешь изучить реализацию хука в Stingit, написанного на `bash`, и вдохновиться им, чтобы создать свою собственную версию. Однако, если тебе понравится данная реализация, то с помощью переменных в скрипте, ты сможешь легко и просто настроить этот хук под себя

| Часть сообщения | Что можно изменить |
|-------|----------|
| `ALLOWED_COMMIT_TYPES` | Определяй свой набор типов коммитов. Например `fix:`, `test:`, `docs:`, `bug:`|
| `PREFIX_TASK_NAME` | Определяй свой префикс задач. Например `AAPL` или `GE` или `NKE`|
| `DESCRIPTION_CHANGES` | Определяй свои ограничения по минимальному кол-ву слов и символов в описании изменений, а также по максимальной длине всего сообщения коммита|

## Есть сомнения к качеству хука? Это правильно!

Для данного хука написано более 90 тестов, которые располагаются в файле `commit-msg-tests.bats`. Просмотри их, запусти с помощью `bats`, и убедись в качестве скрипта

## Обратная связь

Что бы ты хотел изменить или улучшить в данном хуке? Скажи об этом в [Telegram-канале «Stingit»](https://t.me/stingit)
